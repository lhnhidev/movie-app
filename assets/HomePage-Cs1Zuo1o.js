import{j as e,F as g,f as b,L as h,r as x}from"./index-CVMRhkUn.js";import{I as j,u as p,M as m}from"./MovieCard-ClWOAZX9.js";import{u as f}from"./useModalContext-BWHxG-i2.js";function N({movie:s,trailerVideoKey:r}){const{openPopup:n}=f();return e.jsxs(e.Fragment,{children:[e.jsx(j,{src:`https://image.tmdb.org/t/p/original${s==null?void 0:s.backdrop_path}`,alt:"page",className:"aspect-video w-[100vw] brightness-50",aspect:""}),e.jsxs("div",{className:"absolute bottom-[30px] px-8 text-white lg:bottom-[15%] xl:bottom-[25%]",children:[e.jsx("p",{className:"mb-2 text-[16px] font-bold min-[480px]:text-[20px] md:text-[24px]",children:s==null?void 0:s.original_title}),e.jsxs("div",{className:"text-[12px] min-[480px]:text-[14px]",children:[e.jsx("p",{className:"mb-2 inline-block border border-gray-400 p-1 text-gray-400",children:"PG13"}),e.jsx("p",{className:"mb-6",children:s==null?void 0:s.release_date})]}),e.jsx("div",{children:e.jsxs("div",{className:"hidden md:block md:w-[65%] min-[850px]:w-1/2",children:[e.jsx("p",{className:"mb-3 text-[18px] font-bold",children:"Overview"}),e.jsx("p",{className:"mb-5",children:s==null?void 0:s.overview})]})}),e.jsxs("div",{className:"flex gap-1 text-[12px] min-[480px]:text-[14px] md:gap-2",children:[e.jsxs("button",{className:"rounded bg-gray-200 px-2 py-1 text-black md:px-5 md:py-3",onClick:()=>{n(e.jsx("iframe",{className:"aspect-video w-1/2 min-w-[450px]",src:`https://www.youtube.com/embed/${r}`}))},children:[e.jsx(g,{icon:b,className:"mr-1"}),"Trailer"]}),e.jsx(h,{to:`/movie/${s.id}`,children:e.jsx("button",{className:"rounded border border-gray-200 px-2 py-1 md:px-5 md:py-3",children:"Details"})})]})]})]})}function y({movies:s,activeMovieId:r,setActiveMovieId:n}){return e.jsx("div",{className:"absolute bottom-[30px] right-8 lg:bottom-[15%] xl:bottom-[25%]",children:e.jsx("ul",{className:"hidden gap-1 min-[480px]:flex",children:s.map(l=>e.jsx("li",{className:`h-1 w-6 cursor-pointer ${r===l.id?"bg-stone-50":"bg-gray-500"}`,onClick:()=>n(l.id)},l.id))})})}function w(){const[s,r]=x.useState(),{data:n}=p({url:"movie/popular"}),{data:l}=p({url:`movie/${s}/videos`},{enable:!!s}),d=x.useMemo(()=>{var a;return((a=n==null?void 0:n.results)==null?void 0:a.slice(0,4))||[]},[n]);return x.useEffect(()=>{var a;r((a=d[0])==null?void 0:a.id)},[d]),x.useEffect(()=>{let a=1;const i=setInterval(()=>{var c;a>=d.length&&(a=0),r((c=d[a++])==null?void 0:c.id)},5e3);return()=>clearInterval(i)},[d]),e.jsx("div",{className:"relative",children:d.filter(a=>a.id===s).map(a=>{var i;return e.jsxs("div",{children:[e.jsx(N,{movie:a,trailerVideoKey:(i=((l==null?void 0:l.results)||[]).find(c=>c.type==="Trailer"&&c.site==="YouTube"))==null?void 0:i.key}),e.jsx(y,{movies:d,activeMovieId:s,setActiveMovieId:r})]},a.id)})})}function u({title:s,tabs:r,type:n}){const[l,d]=x.useState(sessionStorage.getItem(`tab_${n}_id`)??r[0].id),a=x.useMemo(()=>{var t;return(t=r.find(o=>o.id===l))==null?void 0:t.url},[r,l]),{data:i}=p({url:a}),c=x.useMemo(()=>(i==null?void 0:i.results)||[],[i]);return e.jsxs("div",{className:"bg-slate-950 px-8 py-8 text-white",children:[e.jsxs("div",{className:"mb-6 flex items-center gap-4",children:[e.jsx("p",{className:"mr-4 text-[16px] font-bold min-[480px]:mr-10 min-[480px]:text-[20px] min-[768px]:text-[24px]",children:s}),e.jsx("ul",{className:"flex items-center justify-center gap-2 rounded border border-white text-[12px] min-[480px]:text-[14px] min-[768px]:text-[16px]",children:r.map(t=>e.jsx("li",{className:`cursor-pointer rounded px-1 py-1 min-[480px]:px-2 ${t.id==l?"bg-white text-black":""}`,onClick:()=>{sessionStorage.setItem(`tab_${n}_id`,t.id),d(t.id)},children:t.label},t.id))})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4 sm:grid-cols-4 lg:grid-cols-6 lg:gap-6",children:c.map(t=>e.jsx(m,{id:t==null?void 0:t.id,poster:t==null?void 0:t.poster_path,title:(t==null?void 0:t.title)||(t==null?void 0:t.name),point:t==null?void 0:t.vote_average,date:(t==null?void 0:t.release_date)||(t==null?void 0:t.first_air_date),mediaType:(t==null?void 0:t.media_type)||l},t==null?void 0:t.id))})]})}const _=[{id:"all",label:"All",url:"trending/all/day?language=en-US"},{id:"movie",label:"Movie",url:"trending/movie/day?language=en-US"},{id:"tv",label:"Tv show",url:"trending/tv/day?language=en-US"}],I=[{id:"movie",label:"Movie",url:"movie/top_rated"},{id:"tv",label:"Tv show",url:"tv/top_rated"}];function S(){return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mt-14 aspect-video bg-slate-950 lg:mt-20",children:e.jsx(w,{})}),e.jsx(u,{title:"Trending",tabs:_,type:"trending"}),e.jsx(u,{title:"Rated",tabs:I,type:"rated"})]})}export{S as default};
